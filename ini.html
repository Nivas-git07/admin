<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   CiviFix Admin Portal
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-white text-gray-900 relative" id="app">
  <header class="flex items-center justify-between px-4 py-3 border-b border-gray-200">
   <div class="flex items-center space-x-2">
    <div class="bg-blue-700 rounded px-2 py-1 flex items-center justify-center">
     <img alt="Blue document icon representing CiviFix logo" class="w-5 h-5" height="20" src="https://storage.googleapis.com/a1aa/image/8478ae21-42cb-4f2e-d510-57e31610fa25.jpg" width="20"/>
    </div>
    <h1 class="font-semibold text-gray-900 text-base flex items-center space-x-1">
     <span>
      CiviFix
     </span>
     <span class="text-gray-400 font-normal text-sm">
      Admin Portal
     </span>
    </h1>
    <nav class="flex items-center space-x-4 ml-6 text-sm text-gray-600">
     <button class="flex items-center space-x-1 text-blue-600 font-semibold hover:underline focus:outline-none" onclick="navigateTo('dashboard')" type="button">
      <i aria-hidden="true" class="fas fa-home">
      </i>
      <span>
       Dashboard
      </span>
     </button>
     <button class="flex items-center space-x-1 hover:text-gray-900 focus:outline-none" onclick="navigateTo('analytics')" type="button">
      <i aria-hidden="true" class="fas fa-chart-bar">
      </i>
      <span>
       Analytics
      </span>
     </button>
     <button class="flex items-center space-x-1 hover:text-gray-900 focus:outline-none" onclick="navigateTo('users')" type="button">
      <i aria-hidden="true" class="fas fa-users">
      </i>
      <span>
       Users
      </span>
     </button>
    </nav>
   </div>
   <div class="flex items-center space-x-4 relative">
    <form class="relative" onsubmit="searchComplaints(event)">
     <input aria-label="Search complaints" class="border border-gray-300 rounded-md py-1.5 pl-3 pr-8 text-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600" id="searchInput" placeholder="Search complaints..." type="search"/>
     <button aria-label="Search" class="absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none" type="submit">
      <i aria-hidden="true" class="fas fa-search text-sm">
      </i>
     </button>
    </form>
    <button aria-expanded="false" aria-haspopup="true" aria-label="Notifications" class="relative cursor-pointer focus:outline-none" id="notificationBtn" onclick="toggleNotifications()" type="button">
     <i aria-hidden="true" class="fas fa-bell text-gray-600 text-lg">
     </i>
     <span class="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-semibold rounded-full w-5 h-5 flex items-center justify-center" id="notificationCount">
      3
     </span>
    </button>
    <button aria-label="Settings" class="text-gray-600 hover:text-gray-900 focus:outline-none" onclick="openSettings()" type="button">
     <i aria-hidden="true" class="fas fa-cog text-lg">
     </i>
    </button>
    <div aria-label="User profile info" class="flex items-center space-x-2 bg-gray-200 rounded-full px-3 py-1 text-sm text-gray-700 cursor-default select-none" role="group">
     <span aria-hidden="true" class="bg-gray-400 rounded-full w-6 h-6 flex items-center justify-center text-white font-semibold">
      A
     </span>
     <span>
      Admin User
     </span>
     <button aria-label="Logout" class="text-gray-600 focus:outline-none" onclick="logout()" type="button">
      <i aria-hidden="true" class="fas fa-sign-out-alt">
      </i>
     </button>
    </div>
    <!-- Notification Popup -->
    <div aria-label="Notification panel" aria-live="polite" class="hidden absolute top-full right-0 mt-2 w-80 bg-white border border-gray-300 rounded-md shadow-lg z-50" id="notificationPanel" role="region">
     <div class="p-4 border-b border-gray-200 font-semibold text-gray-900 flex justify-between items-center">
      Notifications
      <button aria-label="Close notifications" class="text-gray-500 hover:text-gray-700 focus:outline-none" onclick="closeNotifications()" type="button">
       <i aria-hidden="true" class="fas fa-times">
       </i>
      </button>
     </div>
     <ul class="divide-y divide-gray-200 max-h-96 overflow-y-auto" id="notificationList">
      <li class="flex items-start space-x-3 p-4 hover:bg-gray-50">
       <img alt="User profile picture of John Doe" class="w-10 h-10 rounded-full object-cover" height="40" src="https://storage.googleapis.com/a1aa/image/81b4f106-83a9-4d9f-419a-4eaa032bd015.jpg" width="40"/>
       <div class="flex-1">
        <p class="text-sm font-semibold text-gray-900">
         John Doe
        </p>
        <p class="text-xs text-gray-600">
         Reported a broken streetlight on Main Street.
        </p>
       </div>
      </li>
      <li class="flex items-start space-x-3 p-4 hover:bg-gray-50">
       <img alt="User profile picture of Jane Smith" class="w-10 h-10 rounded-full object-cover" height="40" src="https://storage.googleapis.com/a1aa/image/22b1a4fd-85f1-436c-6777-f19fcf2b78f6.jpg" width="40"/>
       <div class="flex-1">
        <p class="text-sm font-semibold text-gray-900">
         Jane Smith
        </p>
        <p class="text-xs text-gray-600">
         Reported potholes on 5th Avenue.
        </p>
       </div>
      </li>
      <li class="flex items-start space-x-3 p-4 hover:bg-gray-50">
       <img alt="User profile picture of Alex Johnson" class="w-10 h-10 rounded-full object-cover" height="40" src="https://storage.googleapis.com/a1aa/image/2e540d55-2ea6-41f8-1509-2125a24bc05d.jpg" width="40"/>
       <div class="flex-1">
        <p class="text-sm font-semibold text-gray-900">
         Alex Johnson
        </p>
        <p class="text-xs text-gray-600">
         Reported graffiti on Elm Street wall.
        </p>
       </div>
      </li>
     </ul>
    </div>
   </div>
  </header>
  <main class="p-4 max-w-7xl mx-auto space-y-4" id="mainContent">
   <!-- Dashboard content will be rendered here -->
  </main>
  <script>
   // Data for complaints
    const complaints = [
      {
        id: 'CIV-2024-001',
        status: 'Open',
        priority: 'Medium Priority',
        title: 'Broken streetlight on Main Street',
        description: 'The streetlight at the intersection of Main St and Oak Ave has been out for 3 days.',
        email: 'john.doe@gmail.com',
        category: 'Infrastructure',
        date: '2024-01-15',
        photo: 'https://placehold.co/300x200?text=Broken+Streetlight+Photo&bg=gray&fg=white'
      },
      {
        id: 'CIV-2024-002',
        status: 'In Progress',
        priority: 'High Priority',
        title: 'Broken streetlight on Main Street',
        description: 'The streetlight at the intersection of Main St and Oak Ave has been out for 3 days.',
        email: 'john.doe@gmail.com',
        category: 'Infrastructure',
        date: '2024-01-15',
        photo: 'https://placehold.co/300x200?text=Broken+Streetlight+Photo&bg=gray&fg=white'
      },
      {
        id: 'CIV-2024-003',
        status: 'Open',
        priority: 'Medium Priority',
        title: 'Broken streetlight on Main Street',
        description: 'The streetlight at the intersection of Main St and Oak Ave has been out for 3 days.',
        email: 'john.doe@gmail.com',
        category: 'Infrastructure',
        date: '2024-01-15',
        photo: 'https://placehold.co/300x200?text=Broken+Streetlight+Photo&bg=gray&fg=white'
      },
      {
        id: 'CIV-2024-004',
        status: 'Open',
        priority: 'Medium Priority',
        title: 'Broken streetlight on Main Street',
        description: 'The streetlight at the intersection of Main St and Oak Ave has been out for 3 days.',
        email: 'john.doe@gmail.com',
        category: 'Infrastructure',
        date: '2024-01-15',
        photo: 'https://placehold.co/300x200?text=Broken+Streetlight+Photo&bg=gray&fg=white'
      },
      {
        id: 'CIV-2024-005',
        status: 'Open',
        priority: 'Medium Priority',
        title: 'Broken streetlight on Main Street',
        description: 'The streetlight at the intersection of Main St and Oak Ave has been out for 3 days.',
        email: 'john.doe@gmail.com',
        category: 'Infrastructure',
        date: '2024-01-15',
        photo: 'https://placehold.co/300x200?text=Broken+Streetlight+Photo&bg=gray&fg=white'
      },
    ];

    // Render dashboard list
    function renderDashboard() {
      const main = document.getElementById('mainContent');
      main.innerHTML = `
        <section class="flex flex-col sm:flex-row sm:space-x-4 space-y-4 sm:space-y-0">
          <div class="flex-1 bg-blue-600 text-white rounded-md p-4 flex justify-between items-center">
            <div>
              <p class="text-xs font-semibold">Total Complaints</p>
              <p class="text-3xl font-bold leading-none">${complaints.length}</p>
              <p class="text-xs">All time reports</p>
            </div>
            <img alt="White document icon representing total complaints" class="w-6 h-6" height="24" src="https://storage.googleapis.com/a1aa/image/ec64ecb7-7747-4471-ce97-001543b0bbcd.jpg" width="24"/>
          </div>
          <div class="flex-1 bg-red-600 text-white rounded-md p-4 flex justify-between items-center">
            <div>
              <p class="text-xs font-semibold">Open</p>
              <p class="text-3xl font-bold leading-none">${complaints.filter(c => c.status === 'Open').length}</p>
              <p class="text-xs">Needs attention</p>
            </div>
            <i class="fas fa-info-circle text-white text-lg"></i>
          </div>
          <div class="flex-1 bg-orange-600 text-white rounded-md p-4 flex justify-between items-center">
            <div>
              <p class="text-xs font-semibold">In Progress</p>
              <p class="text-3xl font-bold leading-none">${complaints.filter(c => c.status === 'In Progress').length}</p>
              <p class="text-xs">Being processed</p>
            </div>
            <i class="fas fa-clock text-white text-lg"></i>
          </div>
          <div class="flex-1 bg-green-700 text-white rounded-md p-4 flex justify-between items-center">
            <div>
              <p class="text-xs font-semibold">Resolved</p>
              <p class="text-3xl font-bold leading-none">${complaints.filter(c => c.status === 'Resolved').length}</p>
              <p class="text-xs">Successfully closed</p>
            </div>
            <i class="fas fa-check-circle text-white text-lg"></i>
          </div>
        </section>
        <section class="bg-white border border-gray-200 rounded-md p-4 max-w-full overflow-x-auto mt-4">
          <h2 class="font-semibold mb-4 text-gray-900">Complaint Reports (${complaints.length})</h2>
          ${complaints.map(c => `
            <article class="mb-6 last:mb-0">
              <div class="flex flex-wrap items-center gap-2 mb-1">
                <span class="text-xs font-semibold text-blue-600 bg-blue-100 rounded px-2 py-0.5">${c.id}</span>
                <span class="text-xs font-semibold text-white ${c.status === 'Open' ? 'bg-red-600' : c.status === 'In Progress' ? 'bg-indigo-600' : 'bg-gray-600'} rounded px-2 py-0.5">${c.status}</span>
                <span class="text-xs font-semibold ${c.priority === 'High Priority' ? 'text-red-400 bg-red-100' : 'text-orange-600 bg-orange-100'} rounded px-2 py-0.5">${c.priority}</span>
              </div>
              <h3 class="font-semibold text-gray-900 text-sm mb-1">${c.title}</h3>
              <p class="text-xs text-gray-600 mb-2">${c.description}</p>
              <div class="flex flex-wrap items-center text-xs text-gray-500 space-x-4 mb-3">
                <div class="flex items-center space-x-1"><i class="fas fa-user"></i><span>${c.email}</span></div>
                <div class="flex items-center space-x-1"><i class="fas fa-wrench"></i><span>${c.category}</span></div>
                <div class="flex items-center space-x-1"><i class="fas fa-calendar-alt"></i><span>${c.date}</span></div>
              </div>
              <div class="flex space-x-2 justify-end">
                <button class="border border-blue-600 text-blue-600 text-xs rounded px-3 py-1 hover:bg-blue-50 focus:outline-none" type="button" onclick="viewDetails('${c.id}')">View Details</button>
                <button class="bg-blue-600 text-white text-xs rounded px-3 py-1 hover:bg-blue-700 focus:outline-none" type="button" onclick="updateStatus('${c.id}')">Update Status</button>
              </div>
            </article>
          `).join('')}
        </section>
      `;
    }

    // Render complaint details page with photo on right side
    function renderDetails(complaintId) {
      const complaint = complaints.find(c => c.id === complaintId);
      if (!complaint) {
        alert('Complaint not found');
        renderDashboard();
        return;
      }
      const main = document.getElementById('mainContent');
      main.innerHTML = `
        <button class="mb-4 text-blue-600 hover:underline focus:outline-none" type="button" onclick="renderDashboard()">
          &larr; Back to Dashboard
        </button>
        <section class="bg-white border border-gray-200 rounded-md p-6 max-w-full overflow-x-auto flex flex-col md:flex-row md:space-x-6">
          <div class="flex-1">
            <h2 class="text-xl font-semibold mb-4 text-gray-900">${complaint.title}</h2>
            <p class="mb-4 text-gray-700">${complaint.description}</p>
            <div class="mb-4 space-y-2 text-sm text-gray-600">
              <div><strong>Complaint ID:</strong> ${complaint.id}</div>
              <div><strong>Status:</strong> ${complaint.status}</div>
              <div><strong>Priority:</strong> ${complaint.priority}</div>
              <div><strong>Reported by:</strong> ${complaint.email}</div>
              <div><strong>Category:</strong> ${complaint.category}</div>
              <div><strong>Date Reported:</strong> ${complaint.date}</div>
            </div>
            <div class="flex space-x-2">
              <button class="bg-blue-600 text-white text-xs rounded px-3 py-1 hover:bg-blue-700 focus:outline-none" type="button" onclick="updateStatus('${complaint.id}')">Update Status</button>
              <button class="border border-gray-300 text-gray-700 text-xs rounded px-3 py-1 hover:bg-gray-100 focus:outline-none" type="button" onclick="renderDashboard()">Close</button>
            </div>
          </div>
          <div class="mt-6 md:mt-0 md:w-80 flex-shrink-0">
            <img alt="Photo related to complaint: ${complaint.title}" class="rounded border border-gray-300 w-full h-auto object-cover" src="${complaint.photo}"/>
          </div>
        </section>
      `;
    }

    // Navigation function
    function navigateTo(page) {
      alert(`Navigate to ${page} page.`);
      // Implement actual navigation logic here
    }

    // Search function
    function searchComplaints(event) {
      event.preventDefault();
      const query = document.getElementById('searchInput').value.trim().toLowerCase();
      if (!query) {
        alert('Please enter a search term.');
        return;
      }
      const filtered = complaints.filter(c =>
        c.id.toLowerCase().includes(query) ||
        c.title.toLowerCase().includes(query) ||
        c.description.toLowerCase().includes(query) ||
        c.email.toLowerCase().includes(query) ||
        c.category.toLowerCase().includes(query)
      );
      const main = document.getElementById('mainContent');
      if (filtered.length === 0) {
        main.innerHTML = `<p class="text-center text-gray-600 mt-10">No complaints found for "${query}".</p>`;
        return;
      }
      main.innerHTML = `
        <button class="mb-4 text-blue-600 hover:underline focus:outline-none" type="button" onclick="renderDashboard()">
          &larr; Back to Dashboard
        </button>
        <section class="bg-white border border-gray-200 rounded-md p-4 max-w-full overflow-x-auto">
          <h2 class="font-semibold mb-4 text-gray-900">Search Results (${filtered.length})</h2>
          ${filtered.map(c => `
            <article class="mb-6 last:mb-0">
              <div class="flex flex-wrap items-center gap-2 mb-1">
                <span class="text-xs font-semibold text-blue-600 bg-blue-100 rounded px-2 py-0.5">${c.id}</span>
                <span class="text-xs font-semibold text-white ${c.status === 'Open' ? 'bg-red-600' : c.status === 'In Progress' ? 'bg-indigo-600' : 'bg-gray-600'} rounded px-2 py-0.5">${c.status}</span>
                <span class="text-xs font-semibold ${c.priority === 'High Priority' ? 'text-red-400 bg-red-100' : 'text-orange-600 bg-orange-100'} rounded px-2 py-0.5">${c.priority}</span>
              </div>
              <h3 class="font-semibold text-gray-900 text-sm mb-1">${c.title}</h3>
              <p class="text-xs text-gray-600 mb-2">${c.description}</p>
              <div class="flex flex-wrap items-center text-xs text-gray-500 space-x-4 mb-3">
                <div class="flex items-center space-x-1"><i class="fas fa-user"></i><span>${c.email}</span></div>
                <div class="flex items-center space-x-1"><i class="fas fa-wrench"></i><span>${c.category}</span></div>
                <div class="flex items-center space-x-1"><i class="fas fa-calendar-alt"></i><span>${c.date}</span></div>
              </div>
              <div class="flex space-x-2 justify-end">
                <button class="border border-blue-600 text-blue-600 text-xs rounded px-3 py-1 hover:bg-blue-50 focus:outline-none" type="button" onclick="viewDetails('${c.id}')">View Details</button>
                <button class="bg-blue-600 text-white text-xs rounded px-3 py-1 hover:bg-blue-700 focus:outline-none" type="button" onclick="updateStatus('${c.id}')">Update Status</button>
              </div>
            </article>
          `).join('')}
        </section>
      `;
    }

    // Toggle notification panel
    function toggleNotifications() {
      const notificationPanel = document.getElementById('notificationPanel');
      const notificationBtn = document.getElementById('notificationBtn');
      const isHidden = notificationPanel.classList.contains('hidden');
      if (isHidden) {
        notificationPanel.classList.remove('hidden');
        notificationBtn.setAttribute('aria-expanded', 'true');
      } else {
        notificationPanel.classList.add('hidden');
        notificationBtn.setAttribute('aria-expanded', 'false');
      }
    }

    // Close notification panel
    function closeNotifications() {
      const notificationPanel = document.getElementById('notificationPanel');
      const notificationBtn = document.getElementById('notificationBtn');
      notificationPanel.classList.add('hidden');
      notificationBtn.setAttribute('aria-expanded', 'false');
    }

    // Open settings function
    function openSettings() {
      alert('Open settings panel.');
      // Implement actual settings logic here
    }

    // Logout function
    function logout() {
      const confirmed = confirm('Are you sure you want to logout?');
      if (confirmed) {
        alert('Logging out...');
        // Implement actual logout logic here
      }
    }

    // View details function
    function viewDetails(complaintId) {
      renderDetails(complaintId);
    }

    // Update status function
    function updateStatus(complaintId) {
      alert(`Update status for complaint: ${complaintId}`);
      // Implement actual update status logic here
    }

    // Close the notification panel if clicked outside
    document.addEventListener('click', (e) => {
      const notificationBtn = document.getElementById('notificationBtn');
      const notificationPanel = document.getElementById('notificationPanel');
      if (!notificationBtn.contains(e.target) && !notificationPanel.contains(e.target)) {
        notificationPanel.classList.add('hidden');
        notificationBtn.setAttribute('aria-expanded', 'false');
      }
    });

    // Close on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeNotifications();
      }
    });

    // Initial render
    renderDashboard();
  </script>
 </body>
</html>
